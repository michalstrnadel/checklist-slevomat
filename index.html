<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slevomat - Z√°≈æitky</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --color-primary: #006eb9;
            --color-primary-hover: #005685;
            --color-success: #088107;
            --color-info: #00b2e5;
            --color-warning: #ffa400;
            --color-danger: #d2381d;
            --color-text-primary: #000000;
            --color-text-secondary: #6b6b70;
            --color-border: #cbccce;
            --color-surface-primary: #ffffff;
            --color-surface-faded: #f1f3f5;

            /* Rarity colors */
            --rarity-common: #6b6b70;
            --rarity-rare: #00b2e5;
            --rarity-epic: #8b5cf6;
            --rarity-legendary: #ffa400;

            /* Spacing */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;

            /* Border radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --radius-full: 9999px;

            /* Typography */
            --font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            color: var(--color-text-primary);
            line-height: 1.5;
            overflow-x: hidden;
        }

        .mobile-container {
            max-width: 414px;
            margin: 0 auto;
            min-height: 100vh;
            background: var(--color-surface-primary);
            box-shadow: 0 0 60px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        /* Version Switcher */
        .version-switcher {
            background: white;
            border-bottom: 2px solid var(--color-border);
            padding: var(--spacing-sm);
            display: flex;
            gap: var(--spacing-sm);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .version-btn {
            flex: 1;
            padding: var(--spacing-sm) var(--spacing-md);
            background: var(--color-surface-faded);
            border: 2px solid var(--color-border);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: var(--color-text-secondary);
            transition: all 0.2s;
        }

        .version-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .version-content {
            display: none;
        }

        .version-content.active {
            display: block;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-info) 100%);
            color: white;
            padding: var(--spacing-md);
            padding-top: 40px;
            position: relative;
            overflow: hidden;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-md);
            position: relative;
            z-index: 1;
        }

        .user-section {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
        }

        .avatar {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, #ffa400, #ff6b6b);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            border: 3px solid white;
        }

        .user-info h2 {
            font-size: 20px;
            margin-bottom: 2px;
        }

        .user-stats {
            display: flex;
            gap: var(--spacing-md);
            font-size: 13px;
            opacity: 0.95;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .streak-badge {
            background: rgba(255, 164, 0, 0.2);
            padding: 2px 8px;
            border-radius: var(--radius-full);
            font-weight: 600;
        }

        /* Level Progress */
        .level-section {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: var(--spacing-md);
            border-radius: var(--radius-lg);
            margin-top: var(--spacing-md);
            position: relative;
            z-index: 1;
        }

        .level-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-sm);
        }

        .level-badge {
            background: white;
            color: var(--color-primary);
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-weight: 700;
            font-size: 14px;
        }

        .xp-text {
            font-size: 13px;
            font-weight: 600;
        }

        .progress-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-full);
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffa400, #ffdd00);
            border-radius: var(--radius-full);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 0 10px rgba(255, 164, 0, 0.5);
        }

        /* Quick Stats Cards */
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-sm);
            padding: var(--spacing-md);
            background: var(--color-surface-faded);
        }

        .stat-card {
            background: white;
            padding: var(--spacing-md) var(--spacing-sm);
            border-radius: var(--radius-md);
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--color-text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: white;
            border-bottom: 2px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 10;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            flex: 1;
            min-width: 100px;
            padding: var(--spacing-md);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: var(--color-text-secondary);
            border-bottom: 3px solid transparent;
            transition: all 0.2s;
            position: relative;
        }

        .tab.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .tab-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: var(--color-danger);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: var(--radius-full);
            font-weight: 700;
        }

        /* Content */
        .content {
            padding: var(--spacing-md);
            padding-bottom: 80px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Monthly Challenge */
        .monthly-challenge {
            background: linear-gradient(135deg, #ffa400 0%, #ff6b6b 100%);
            color: white;
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-lg);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(255, 164, 0, 0.3);
        }

        .monthly-challenge::before {
            content: '‚ö°';
            position: absolute;
            top: -10px;
            right: -10px;
            font-size: 120px;
            opacity: 0.1;
        }

        .challenge-header {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--spacing-sm);
            opacity: 0.9;
        }

        .challenge-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--spacing-md);
        }

        .challenge-progress {
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: var(--spacing-sm);
        }

        .challenge-progress-fill {
            height: 100%;
            background: white;
            border-radius: var(--radius-full);
            transition: width 0.4s ease;
        }

        .challenge-reward {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
        }

        /* Quest Item */
        .quest-item {
            background: white;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .quest-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--rarity-common);
            transition: all 0.3s;
        }

        .quest-item.rare::before { background: var(--rarity-rare); }
        .quest-item.epic::before { background: var(--rarity-epic); }
        .quest-item.legendary::before { background: var(--rarity-legendary); }

        .quest-item:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .quest-item.completed {
            border-color: var(--color-success);
            background: linear-gradient(135deg, rgba(8, 129, 7, 0.05) 0%, rgba(8, 129, 7, 0.02) 100%);
        }

        .quest-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-sm);
        }

        .quest-title-section {
            flex: 1;
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .checkbox {
            width: 32px;
            height: 32px;
            min-width: 32px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 18px;
        }

        .checkbox.unchecked {
            border: 3px solid var(--color-primary);
            background: white;
        }

        .checkbox.checked {
            background: var(--color-success);
            border: 3px solid var(--color-success);
        }

        .checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-weight: 700;
        }

        .quest-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .rarity-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: var(--radius-full);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .rarity-common { background: #e5e7eb; color: var(--rarity-common); }
        .rarity-rare { background: #dbeafe; color: var(--rarity-rare); }
        .rarity-epic { background: #ede9fe; color: var(--rarity-epic); }
        .rarity-legendary { background: #fef3c7; color: var(--rarity-legendary); }

        .quest-meta {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
            margin-top: var(--spacing-sm);
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .quest-meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .xp-reward {
            background: linear-gradient(135deg, #ffa400, #ffdd00);
            color: white;
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-weight: 700;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Category Filters */
        .category-filters {
            display: flex;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-lg);
            overflow-x: auto;
            scrollbar-width: none;
            padding: 2px;
        }

        .category-filters::-webkit-scrollbar {
            display: none;
        }

        .filter-btn {
            padding: var(--spacing-sm) var(--spacing-md);
            background: white;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-full);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        /* Achievement Card */
        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-md);
        }

        .achievement-card {
            background: white;
            border: 2px solid var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--spacing-md);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .achievement-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
        }

        .achievement-card.unlocked {
            border-color: var(--color-warning);
            background: linear-gradient(135deg, rgba(255, 164, 0, 0.1) 0%, rgba(255, 221, 0, 0.05) 100%);
        }

        .achievement-card.locked {
            opacity: 0.5;
            filter: grayscale(1);
        }

        .achievement-icon {
            font-size: 36px;
            margin-bottom: var(--spacing-sm);
        }

        .achievement-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .achievement-progress {
            font-size: 11px;
            color: var(--color-text-secondary);
        }

        /* Section Title */
        .section-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--spacing-lg);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .section-icon {
            width: 24px;
            height: 24px;
            stroke-width: 2.5;
        }

        .tab-icon {
            width: 20px;
            height: 20px;
            margin-right: 6px;
            stroke-width: 2;
            flex-shrink: 0;
        }

        .tab {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .stat-icon {
            width: 16px;
            height: 16px;
            stroke-width: 2.5;
        }

        /* Confetti Canvas */
        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* Level Up Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: var(--spacing-xl);
            border-radius: var(--radius-xl);
            max-width: 350px;
            text-align: center;
            animation: slideUp 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
        }

        @keyframes slideUp {
            from { transform: translateY(100px) scale(0.8); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        .modal-icon {
            font-size: 64px;
            margin-bottom: var(--spacing-md);
        }

        .modal-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: var(--spacing-sm);
            background: linear-gradient(135deg, var(--color-primary), var(--color-info));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-text {
            font-size: 16px;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
        }

        .modal-btn {
            width: 100%;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, var(--color-primary), var(--color-info));
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0, 110, 185, 0.4);
        }

        /* ==================== POKUS 2: MAPA Z√Å≈ΩITK≈Æ ==================== */

        .profile-header {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-info) 100%);
            color: white;
            padding: var(--spacing-xl) var(--spacing-lg);
            padding-top: 50px;
            position: relative;
            text-align: center;
        }

        .profile-avatar-large {
            width: 100px;
            height: 100px;
            border-radius: var(--radius-full);
            background: linear-gradient(135deg, #ffa400, #ff6b6b);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            font-weight: 700;
            margin: 0 auto var(--spacing-md);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            border: 4px solid white;
            position: relative;
        }

        .profile-verified {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--color-success);
            width: 28px;
            height: 28px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid white;
        }

        .profile-name {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .profile-role {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: var(--spacing-lg);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--spacing-sm);
            margin-top: var(--spacing-lg);
        }

        .profile-stat-card {
            background: white;
            color: var(--color-text-primary);
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .profile-stat-icon {
            width: 20px;
            height: 20px;
            color: var(--color-primary);
        }

        .profile-stat-label {
            font-size: 10px;
            text-transform: uppercase;
            font-weight: 600;
            color: var(--color-text-secondary);
            letter-spacing: 0.5px;
        }

        .profile-stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--color-primary);
        }

        .profile-content {
            background: white;
            padding: var(--spacing-lg);
        }

        .profile-section-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-md);
        }

        .skill-item {
            margin-bottom: var(--spacing-md);
        }

        .skill-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xs);
        }

        .skill-name {
            font-size: 13px;
            color: var(--color-text-primary);
            font-weight: 500;
        }

        .skill-count {
            font-size: 13px;
            font-weight: 700;
            color: var(--color-text-secondary);
        }

        .skill-bar {
            height: 8px;
            background: #e5e7eb;
            border-radius: var(--radius-full);
            overflow: hidden;
        }

        .skill-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-primary), var(--color-info));
            border-radius: var(--radius-full);
            transition: width 0.6s ease;
        }

        .map-header {
            background: var(--color-primary);
            color: white;
            padding: var(--spacing-lg);
            padding-top: 50px;
            position: relative;
        }

        .map-title-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }

        .map-title {
            font-size: 24px;
            font-weight: 700;
        }

        .map-subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: var(--spacing-md);
        }

        .completion-badge {
            background: var(--color-success);
            color: white;
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: 14px;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .map-path-container {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            min-height: calc(100vh - 200px);
            padding: var(--spacing-xl) 0;
            padding-bottom: 80px;
            position: relative;
            overflow: hidden;
        }

        /* SVG path background */
        .map-path-svg {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .path-item {
            position: relative;
            margin-bottom: 40px;
            display: flex;
            align-items: flex-start;
            z-index: 1;
            animation: fadeInUp 0.5s ease backwards;
        }

        .path-item:nth-child(1) { animation-delay: 0s; }
        .path-item:nth-child(2) { animation-delay: 0.05s; }
        .path-item:nth-child(3) { animation-delay: 0.1s; }
        .path-item:nth-child(4) { animation-delay: 0.15s; }
        .path-item:nth-child(5) { animation-delay: 0.2s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Alternating left-right positioning */
        .path-item:nth-child(odd) {
            flex-direction: row;
            padding-left: 10%;
            padding-right: 35%;
        }

        .path-item:nth-child(even) {
            flex-direction: row-reverse;
            padding-left: 35%;
            padding-right: 10%;
        }

        .path-item:last-child {
            margin-bottom: 0;
        }

        .path-icon-wrapper {
            width: 64px;
            height: 64px;
            min-width: 64px;
            border-radius: var(--radius-full);
            background: white;
            border: 5px solid #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .path-item.completed .path-icon-wrapper {
            background: var(--color-success);
            border-color: var(--color-success);
            box-shadow: 0 6px 20px rgba(8, 129, 7, 0.4);
        }

        .path-item.completed .path-icon-wrapper::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: var(--radius-full);
            background: var(--color-success);
            opacity: 0.3;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.3;
            }
            50% {
                transform: scale(1.2);
                opacity: 0;
            }
        }

        .path-icon {
            width: 32px;
            height: 32px;
            color: #94a3b8;
            stroke-width: 2.5;
            position: relative;
            z-index: 1;
        }

        .path-item.completed .path-icon {
            color: white;
        }

        .path-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--spacing-lg);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            flex: 1;
            margin-left: var(--spacing-md);
            margin-right: var(--spacing-md);
            border: 2px solid transparent;
        }

        .path-item:nth-child(even) .path-card {
            margin-left: var(--spacing-md);
            margin-right: var(--spacing-md);
        }

        .path-card:hover {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            transform: translateY(-4px) scale(1.02);
            border-color: var(--color-primary);
        }

        .path-item.completed .path-card {
            background: linear-gradient(135deg, rgba(8, 129, 7, 0.05) 0%, rgba(8, 129, 7, 0.02) 100%);
            border-color: var(--color-success);
        }

        .path-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--spacing-sm);
        }

        .path-card-meta {
            font-size: 12px;
            color: var(--color-text-secondary);
            margin-bottom: 4px;
        }

        .path-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--color-text-primary);
            margin-bottom: var(--spacing-sm);
        }

        .path-card-info {
            display: flex;
            gap: var(--spacing-md);
            font-size: 12px;
            color: var(--color-text-secondary);
        }

        .path-card-xp {
            background: #fef3c7;
            color: #92400e;
            padding: 2px 8px;
            border-radius: var(--radius-full);
            font-weight: 600;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="mobile-container">
        <!-- Version Switcher -->
        <div class="version-switcher">
            <button class="version-btn active" onclick="switchVersion(1)">Pokus 1</button>
            <button class="version-btn" onclick="switchVersion(2)">Pokus 2</button>
            <button class="version-btn" onclick="switchVersion(3)">Pokus 3</button>
        </div>

        <!-- ==================== POKUS 1: GAMIFIKACE ==================== -->
        <div class="version-content active" id="version1">
            <!-- Header -->
            <header class="header">
                <div class="header-top">
                    <div class="user-section">
                        <div class="avatar">L</div>
                        <div class="user-info">
                            <h2>Lucie</h2>
                            <div class="user-stats">
                                <div class="stat-item">
                                    <i data-lucide="flame" class="stat-icon" style="color: #ffa400;"></i>
                                    <span class="streak-badge"><span id="streak">0</span> dn√≠</span>
                                </div>
                                <div class="stat-item">
                                    <i data-lucide="coins" class="stat-icon" style="color: #ffa400;"></i>
                                    <span id="credits">0</span> kredit≈Ø
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="level-section">
                    <div class="level-header">
                        <div class="level-badge">Level <span id="level">1</span></div>
                        <div class="xp-text"><span id="currentXP">0</span> / <span id="maxXP">100</span> XP</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="xpProgress" style="width: 0%"></div>
                    </div>
                </div>
            </header>

            <!-- Quick Stats -->
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-value" id="totalCompleted">0</div>
                    <div class="stat-label">Splnƒõno</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalQuests">15</div>
                    <div class="stat-label">Celkem</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="achievementCount">0/12</div>
                    <div class="stat-label">Achievementy</div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <button class="tab active" data-tab="quests">
                    <i data-lucide="target" class="tab-icon"></i>
                    Questy
                    <span class="tab-badge" id="monthlyBadge">1</span>
                </button>
                <button class="tab" data-tab="achievements">
                    <i data-lucide="award" class="tab-icon"></i>
                    Achievementy
                </button>
                <button class="tab" data-tab="stats">
                    <i data-lucide="bar-chart-3" class="tab-icon"></i>
                    Stats
                </button>
            </div>

            <!-- Content -->
            <div class="content">
                <!-- Quests Tab -->
                <div class="tab-content active" id="quests">
                    <!-- Monthly Challenge -->
                    <div class="monthly-challenge">
                        <div class="challenge-header" style="display: flex; align-items: center; gap: 8px;">
                            <i data-lucide="calendar" style="width: 16px; height: 16px;"></i>
                            Mƒõs√≠ƒçn√≠ v√Ωzva
                        </div>
                        <div class="challenge-title">Spl≈à alespo≈à 3 z√°≈æitky tento mƒõs√≠c!</div>
                        <div class="challenge-progress">
                            <div class="challenge-progress-fill" id="monthlyProgress" style="width: 0%"></div>
                        </div>
                        <div class="challenge-reward">
                            <span>Progress: <span id="monthlyCount">0</span>/3</span>
                            <span style="display: flex; align-items: center; gap: 4px;">
                                <i data-lucide="gift" style="width: 16px; height: 16px;"></i>
                                +200 XP
                            </span>
                        </div>
                    </div>

                    <!-- Category Filters -->
                    <div class="category-filters">
                        <button class="filter-btn active" data-category="all" style="display: flex; align-items: center; gap: 6px;">
                            <i data-lucide="sparkles" style="width: 16px; height: 16px;"></i>
                            V≈°e
                        </button>
                        <button class="filter-btn" data-category="adrenalin" style="display: flex; align-items: center; gap: 6px;">
                            <i data-lucide="zap" style="width: 16px; height: 16px;"></i>
                            Adrenalin
                        </button>
                        <button class="filter-btn" data-category="relax" style="display: flex; align-items: center; gap: 6px;">
                            <i data-lucide="flower-2" style="width: 16px; height: 16px;"></i>
                            Relax
                        </button>
                        <button class="filter-btn" data-category="food" style="display: flex; align-items: center; gap: 6px;">
                            <i data-lucide="utensils" style="width: 16px; height: 16px;"></i>
                            Food
                        </button>
                        <button class="filter-btn" data-category="travel" style="display: flex; align-items: center; gap: 6px;">
                            <i data-lucide="plane" style="width: 16px; height: 16px;"></i>
                            Travel
                        </button>
                    </div>

                    <div class="section-title">
                        <i data-lucide="clipboard-list" class="section-icon"></i>
                        <span>Tvoje Z√°≈æitky</span>
                    </div>

                    <!-- Quest List -->
                    <div id="questList"></div>
                </div>

                <!-- Achievements Tab -->
                <div class="tab-content" id="achievements">
                    <div class="section-title">
                        <i data-lucide="award" class="section-icon"></i>
                        <span>Tvoje Achievementy</span>
                    </div>
                    <div class="achievement-grid" id="achievementGrid"></div>
                </div>

                <!-- Stats Tab -->
                <div class="tab-content" id="stats">
                    <div class="section-title">
                        <i data-lucide="trending-up" class="section-icon"></i>
                        <span>Tvoje Statistiky</span>
                    </div>
                    <div id="statsContent"></div>
                </div>
            </div>
        </div>

        <!-- ==================== POKUS 2: MAPA Z√Å≈ΩITK≈Æ ==================== -->
        <div class="version-content" id="version2">
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar-large">
                    L
                    <div class="profile-verified">
                        <i data-lucide="check" style="width: 14px; height: 14px; color: white;"></i>
                    </div>
                </div>
                <div class="profile-name">Lucie</div>
                <div class="profile-role">Cestovatel zaƒç√°teƒçn√≠k</div>

                <div class="profile-stats">
                    <div class="profile-stat-card">
                        <i data-lucide="flame" class="profile-stat-icon"></i>
                        <div class="profile-stat-label">Dny v ≈ôadƒõ</div>
                        <div class="profile-stat-value" id="profileStreak">0</div>
                    </div>
                    <div class="profile-stat-card">
                        <i data-lucide="map" class="profile-stat-icon"></i>
                        <div class="profile-stat-label">Z√°≈æitky</div>
                        <div class="profile-stat-value" id="profileCompleted">0</div>
                    </div>
                    <div class="profile-stat-card">
                        <i data-lucide="trophy" class="profile-stat-icon"></i>
                        <div class="profile-stat-label">Level</div>
                        <div class="profile-stat-value" id="profileLevel">1</div>
                    </div>
                </div>
            </div>

            <!-- Profile Skills Section -->
            <div class="profile-content">
                <div class="profile-section-title">Graf cestovatelsk√Ωch dovednost√≠</div>

                <div class="skill-item">
                    <div class="skill-header">
                        <div class="skill-name">
                            <i data-lucide="zap" style="width: 14px; height: 14px; margin-right: 4px; vertical-align: middle;"></i>
                            Adrenalin
                        </div>
                        <div class="skill-count"><span id="skillAdrenalin">0</span>/4</div>
                    </div>
                    <div class="skill-bar">
                        <div class="skill-bar-fill" id="skillBarAdrenalin" style="width: 0%"></div>
                    </div>
                </div>

                <div class="skill-item">
                    <div class="skill-header">
                        <div class="skill-name">
                            <i data-lucide="flower-2" style="width: 14px; height: 14px; margin-right: 4px; vertical-align: middle;"></i>
                            Relax
                        </div>
                        <div class="skill-count"><span id="skillRelax">0</span>/3</div>
                    </div>
                    <div class="skill-bar">
                        <div class="skill-bar-fill" id="skillBarRelax" style="width: 0%"></div>
                    </div>
                </div>

                <div class="skill-item">
                    <div class="skill-header">
                        <div class="skill-name">
                            <i data-lucide="utensils" style="width: 14px; height: 14px; margin-right: 4px; vertical-align: middle;"></i>
                            Food
                        </div>
                        <div class="skill-count"><span id="skillFood">0</span>/4</div>
                    </div>
                    <div class="skill-bar">
                        <div class="skill-bar-fill" id="skillBarFood" style="width: 0%"></div>
                    </div>
                </div>

                <div class="skill-item">
                    <div class="skill-header">
                        <div class="skill-name">
                            <i data-lucide="plane" style="width: 14px; height: 14px; margin-right: 4px; vertical-align: middle;"></i>
                            Travel
                        </div>
                        <div class="skill-count"><span id="skillTravel">0</span>/4</div>
                    </div>
                    <div class="skill-bar">
                        <div class="skill-bar-fill" id="skillBarTravel" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- Map Path -->
            <div class="map-header" style="padding-top: 20px;">
                <div class="map-title-section">
                    <div>
                        <div class="map-title">Tvoje cesta</div>
                        <div class="map-subtitle">Projdi v≈°emi z√°≈æitky</div>
                    </div>
                    <div class="completion-badge">
                        <i data-lucide="check-circle" style="width: 16px; height: 16px;"></i>
                        <span id="mapCompletedCount">0</span>/15
                    </div>
                </div>
            </div>

            <div class="map-path-container" id="mapPathContainer"></div>
        </div>

        <!-- ==================== POKUS 3: TBD ==================== -->
        <div class="version-content" id="version3">
            <div class="content" style="padding-top: 60px; text-align: center;">
                <div style="font-size: 48px; margin-bottom: 16px;">üöß</div>
                <h2 style="margin-bottom: 8px;">Pokus 3</h2>
                <p style="color: var(--color-text-secondary);">P≈ôipravujeme...</p>
            </div>
        </div>

        <!-- Confetti Canvas -->
        <canvas id="confetti"></canvas>

        <!-- Level Up Modal -->
        <div class="modal" id="levelUpModal">
            <div class="modal-content">
                <div class="modal-icon">
                    <i data-lucide="party-popper" style="width: 64px; height: 64px; stroke-width: 2; color: var(--color-warning);"></i>
                </div>
                <div class="modal-title">Level Up!</div>
                <div class="modal-text">Gratuluji! Dos√°hl jsi <strong>Level <span id="modalLevel">2</span></strong>!</div>
                <button class="modal-btn" onclick="closeLevelUpModal()">Pokraƒçovat</button>
            </div>
        </div>

        <!-- Achievement Unlocked Modal -->
        <div class="modal" id="achievementModal">
            <div class="modal-content">
                <div class="modal-icon" id="achievementModalIcon">
                    <i data-lucide="award" style="width: 64px; height: 64px; stroke-width: 2; color: var(--color-warning);"></i>
                </div>
                <div class="modal-title">Achievement Unlocked!</div>
                <div class="modal-text" id="achievementModalText"></div>
                <button class="modal-btn" onclick="closeAchievementModal()">Awesome!</button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        const gameState = {
            level: 1,
            xp: 0,
            streak: 0,
            credits: 0,
            totalCompleted: 0,
            lastCompletedDate: null,
            quests: [
                // Adrenalin
                { id: 1, title: 'Lanov√© centrum', category: 'adrenalin', rarity: 'common', xp: 30, people: 4521, completed: false },
                { id: 2, title: 'J√≠zda na motok√°≈ôe', category: 'adrenalin', rarity: 'rare', xp: 60, people: 3247, completed: false },
                { id: 3, title: 'Paintball s partou', category: 'adrenalin', rarity: 'common', xp: 35, people: 5632, completed: false },
                { id: 4, title: 'Laser game', category: 'adrenalin', rarity: 'common', xp: 25, people: 6891, completed: false },

                // Relax
                { id: 5, title: 'Zkusit head-spa', category: 'relax', rarity: 'rare', xp: 50, people: 2134, completed: false },
                { id: 6, title: 'Thajsk√° mas√°≈æ', category: 'relax', rarity: 'common', xp: 40, people: 8934, completed: false },
                { id: 7, title: 'V√≠kend ve wellness', category: 'relax', rarity: 'epic', xp: 80, people: 1876, completed: false },

                // Food
                { id: 8, title: 'Sn√≠danƒõ v 4* hotelu', category: 'food', rarity: 'rare', xp: 45, people: 3421, completed: false },
                { id: 9, title: 'All you can eat sushi', category: 'food', rarity: 'common', xp: 35, people: 7234, completed: false },
                { id: 10, title: 'Degustaƒçn√≠ menu', category: 'food', rarity: 'epic', xp: 70, people: 2156, completed: false },
                { id: 11, title: 'Vina≈ôsk√Ω kurz s ochutn√°vkou', category: 'food', rarity: 'rare', xp: 55, people: 1987, completed: false },

                // Travel
                { id: 12, title: 'V√≠kend v Praze na hotelu', category: 'travel', rarity: 'rare', xp: 60, people: 5432, completed: false },
                { id: 13, title: 'V√Ωlet do Dr√°≈æƒèan', category: 'travel', rarity: 'common', xp: 40, people: 4123, completed: false },
                { id: 14, title: 'V√≠kend v Karlov√Ωch Varech', category: 'travel', rarity: 'rare', xp: 65, people: 3654, completed: false },
                { id: 15, title: 'Road trip po polsk√Ωch Krkono≈°√≠ch', category: 'travel', rarity: 'epic', xp: 90, people: 1234, completed: false },
            ],
            achievements: [
                { id: 'first', title: 'Prvn√≠ krok', icon: 'target', description: 'Spl≈à prvn√≠ z√°≈æitek', unlocked: false, progress: 0, target: 1 },
                { id: 'beginner', title: 'Zaƒç√°teƒçn√≠k', icon: 'sprout', description: 'Spl≈à 5 z√°≈æitk≈Ø', unlocked: false, progress: 0, target: 5 },
                { id: 'adventurer', title: 'Dobrodruh', icon: 'swords', description: 'Spl≈à 10 z√°≈æitk≈Ø', unlocked: false, progress: 0, target: 10 },
                { id: 'master', title: 'Mistr', icon: 'crown', description: 'Spl≈à v≈°echny z√°≈æitky', unlocked: false, progress: 0, target: 15 },
                { id: 'adrenalin', title: 'Adrenalinov√Ω junkie', icon: 'zap', description: 'Spl≈à v≈°echny adrenalin z√°≈æitky', unlocked: false, progress: 0, target: 4 },
                { id: 'foodie', title: 'Foodie', icon: 'utensils', description: 'Spl≈à v≈°echny food z√°≈æitky', unlocked: false, progress: 0, target: 4 },
                { id: 'traveler', title: 'Cestovatel', icon: 'plane', description: 'Spl≈à v≈°echny travel z√°≈æitky', unlocked: false, progress: 0, target: 4 },
                { id: 'zen', title: 'Zen Master', icon: 'flower-2', description: 'Spl≈à v≈°echny relax z√°≈æitky', unlocked: false, progress: 0, target: 3 },
                { id: 'streak3', title: 'Na vlnƒõ', icon: 'flame', description: '3 dny po sobƒõ', unlocked: false, progress: 0, target: 3 },
                { id: 'streak7', title: 'T√Ωdenn√≠ s√©rie', icon: 'flame', description: '7 dn√≠ po sobƒõ', unlocked: false, progress: 0, target: 7 },
                { id: 'level5', title: 'Level 5', icon: 'star', description: 'Dos√°hni Level 5', unlocked: false, progress: 1, target: 5 },
                { id: 'legendary', title: 'Legend√°rn√≠', icon: 'diamond', description: 'Spl≈à legendary z√°≈æitek', unlocked: false, progress: 0, target: 1 },
            ]
        };

        let currentVersion = 1;

        // Version Switcher
        function switchVersion(version) {
            currentVersion = version;

            // Update buttons
            document.querySelectorAll('.version-btn').forEach((btn, idx) => {
                btn.classList.toggle('active', idx + 1 === version);
            });

            // Update content
            document.querySelectorAll('.version-content').forEach((content, idx) => {
                content.classList.toggle('active', idx + 1 === version);
            });

            // Render appropriate version
            if (version === 2) {
                renderMapView();
                updateProfileRole();
            }

            lucide.createIcons();
        }

        // Update profile role based on level
        function updateProfileRole() {
            const roleElement = document.querySelector('.profile-role');
            if (!roleElement) return;

            const level = gameState.level;
            const completed = gameState.totalCompleted;

            let role = 'Cestovatel zaƒç√°teƒçn√≠k';

            if (completed >= 15) {
                role = 'Mistr dobrodru≈æstv√≠';
            } else if (level >= 5) {
                role = 'Zku≈°en√Ω dobrodruh';
            } else if (completed >= 5) {
                role = 'Pokroƒçil√Ω cestovatel';
            }

            roleElement.textContent = role;
        }

        // Load state from localStorage
        function loadState() {
            const saved = localStorage.getItem('slevomat-game-state');
            if (saved) {
                const savedState = JSON.parse(saved);
                Object.assign(gameState, savedState);
            }
            updateUI();
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem('slevomat-game-state', JSON.stringify(gameState));
        }

        // Calculate level from XP
        function calculateLevel() {
            return Math.floor(gameState.xp / 100) + 1;
        }

        // Calculate max XP for current level
        function calculateMaxXP() {
            return gameState.level * 100;
        }

        // Add XP
        function addXP(amount) {
            const oldLevel = gameState.level;
            gameState.xp += amount;
            const newLevel = calculateLevel();

            if (newLevel > oldLevel) {
                gameState.level = newLevel;
                showLevelUpModal();
                launchConfetti();
                checkAchievement('level5');
            }

            updateUI();
            saveState();
        }

        // Toggle quest
        function toggleQuest(questId) {
            const quest = gameState.quests.find(q => q.id === questId);
            if (!quest) return;

            quest.completed = !quest.completed;

            if (quest.completed) {
                gameState.totalCompleted++;
                addXP(quest.xp);
                gameState.credits += Math.floor(quest.xp / 10);
                updateStreak();
                launchConfetti();

                // Check achievements
                checkAchievement('first');
                checkAchievement('beginner');
                checkAchievement('adventurer');
                checkAchievement('master');
                checkAchievement(quest.category);
                if (quest.rarity === 'legendary') {
                    checkAchievement('legendary');
                }
            } else {
                gameState.totalCompleted--;
                gameState.xp -= quest.xp;
                gameState.credits -= Math.floor(quest.xp / 10);
                if (gameState.xp < 0) gameState.xp = 0;
                if (gameState.credits < 0) gameState.credits = 0;
            }

            updateUI();
            saveState();

            // Re-render map if in version 2
            if (currentVersion === 2) {
                renderMapView();
            }
        }

        // Update streak
        function updateStreak() {
            const today = new Date().toDateString();
            const lastDate = gameState.lastCompletedDate;

            if (lastDate !== today) {
                if (lastDate === new Date(Date.now() - 86400000).toDateString()) {
                    gameState.streak++;
                } else {
                    gameState.streak = 1;
                }
                gameState.lastCompletedDate = today;

                checkAchievement('streak3');
                checkAchievement('streak7');
            }
        }

        // Check achievement
        function checkAchievement(achievementId) {
            const achievement = gameState.achievements.find(a => a.id === achievementId);
            if (!achievement || achievement.unlocked) return;

            let progress = 0;

            switch (achievementId) {
                case 'first':
                case 'beginner':
                case 'adventurer':
                case 'master':
                    progress = gameState.totalCompleted;
                    break;
                case 'adrenalin':
                case 'food':
                case 'travel':
                case 'relax':
                    progress = gameState.quests.filter(q => q.category === achievementId && q.completed).length;
                    break;
                case 'streak3':
                case 'streak7':
                    progress = gameState.streak;
                    break;
                case 'level5':
                    progress = gameState.level;
                    break;
                case 'legendary':
                    progress = gameState.quests.filter(q => q.rarity === 'legendary' && q.completed).length;
                    break;
            }

            achievement.progress = progress;

            if (progress >= achievement.target && !achievement.unlocked) {
                achievement.unlocked = true;
                showAchievementModal(achievement);
                addXP(50);
            }
        }

        // Update UI
        function updateUI() {
            // Level and XP
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('currentXP').textContent = gameState.xp;
            const maxXP = calculateMaxXP();
            document.getElementById('maxXP').textContent = maxXP;
            const xpPercent = ((gameState.xp % 100) / 100) * 100;
            document.getElementById('xpProgress').style.width = xpPercent + '%';

            // Stats
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('credits').textContent = gameState.credits;
            document.getElementById('totalCompleted').textContent = gameState.totalCompleted;
            document.getElementById('totalQuests').textContent = gameState.quests.length;

            const unlockedCount = gameState.achievements.filter(a => a.unlocked).length;
            document.getElementById('achievementCount').textContent = `${unlockedCount}/${gameState.achievements.length}`;

            // Monthly challenge
            const monthlyCompleted = Math.min(gameState.totalCompleted, 3);
            document.getElementById('monthlyCount').textContent = monthlyCompleted;
            document.getElementById('monthlyProgress').style.width = (monthlyCompleted / 3 * 100) + '%';

            if (monthlyCompleted >= 3) {
                document.getElementById('monthlyBadge').style.display = 'none';
            } else {
                document.getElementById('monthlyBadge').style.display = 'block';
            }

            // Map completed count
            document.getElementById('mapCompletedCount').textContent = gameState.totalCompleted;

            // Profile stats (Pokus 2)
            document.getElementById('profileStreak').textContent = gameState.streak;
            document.getElementById('profileCompleted').textContent = gameState.totalCompleted;
            document.getElementById('profileLevel').textContent = gameState.level;

            // Skill bars (Pokus 2)
            updateSkillBars();
            updateProfileRole();

            renderQuests();
            renderAchievements();
            renderStats();
            lucide.createIcons();
        }

        // Update skill bars for profile (Pokus 2)
        function updateSkillBars() {
            const categories = ['adrenalin', 'relax', 'food', 'travel'];
            const targets = { adrenalin: 4, relax: 3, food: 4, travel: 4 };

            categories.forEach(cat => {
                const completed = gameState.quests.filter(q => q.category === cat && q.completed).length;
                const target = targets[cat];
                const percent = (completed / target) * 100;

                const capitalizedCat = cat.charAt(0).toUpperCase() + cat.slice(1);
                document.getElementById(`skill${capitalizedCat}`).textContent = completed;
                document.getElementById(`skillBar${capitalizedCat}`).style.width = percent + '%';
            });
        }

        // Render quests
        function renderQuests(category = 'all') {
            const questList = document.getElementById('questList');
            const filtered = category === 'all'
                ? gameState.quests
                : gameState.quests.filter(q => q.category === category);

            questList.innerHTML = filtered.map(quest => `
                <div class="quest-item ${quest.rarity} ${quest.completed ? 'completed' : ''}" onclick="toggleQuest(${quest.id})">
                    <div class="quest-header">
                        <div class="quest-title-section">
                            <div class="checkbox ${quest.completed ? 'checked' : 'unchecked'}"></div>
                            <div>
                                <div class="quest-title">${quest.title}</div>
                                <div class="quest-meta">
                                    <span class="rarity-badge rarity-${quest.rarity}">${quest.rarity}</span>
                                    <span class="quest-meta-item" style="display: flex; align-items: center; gap: 4px;">
                                        <i data-lucide="users" style="width: 14px; height: 14px;"></i>
                                        ${quest.people.toLocaleString()}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="xp-reward" style="display: flex; align-items: center; gap: 4px;">
                            <i data-lucide="star" style="width: 14px; height: 14px;"></i>
                            +${quest.xp}
                        </div>
                    </div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // Render achievements
        function renderAchievements() {
            const grid = document.getElementById('achievementGrid');
            grid.innerHTML = gameState.achievements.map(ach => `
                <div class="achievement-card ${ach.unlocked ? 'unlocked' : 'locked'}"
                     onclick="showAchievementInfo('${ach.id}')">
                    <div class="achievement-icon">
                        <i data-lucide="${ach.icon}" style="width: 36px; height: 36px; stroke-width: 2;"></i>
                    </div>
                    <div class="achievement-title">${ach.title}</div>
                    <div class="achievement-progress">${ach.progress}/${ach.target}</div>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // Render stats
        function renderStats() {
            const statsContent = document.getElementById('statsContent');
            const categories = ['adrenalin', 'relax', 'food', 'travel'];
            const rarities = ['common', 'rare', 'epic', 'legendary'];

            const categoryStats = categories.map(cat => {
                const total = gameState.quests.filter(q => q.category === cat).length;
                const completed = gameState.quests.filter(q => q.category === cat && q.completed).length;
                return { cat, total, completed, percent: Math.round(completed / total * 100) };
            });

            const rarityStats = rarities.map(rar => {
                const total = gameState.quests.filter(q => q.rarity === rar).length;
                const completed = gameState.quests.filter(q => q.rarity === rar && q.completed).length;
                return { rar, total, completed };
            });

            statsContent.innerHTML = `
                <div style="background: white; padding: var(--spacing-lg); border-radius: var(--radius-lg); margin-bottom: var(--spacing-lg);">
                    <h3 style="margin-bottom: var(--spacing-md); font-size: 18px; display: flex; align-items: center; gap: 8px;">
                        <i data-lucide="folder" style="width: 20px; height: 20px;"></i>
                        Kategorie
                    </h3>
                    ${categoryStats.map(s => `
                        <div style="margin-bottom: var(--spacing-md);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-sm); font-size: 14px; align-items: center;">
                                <span style="text-transform: capitalize; display: flex; align-items: center;">${getCategoryIcon(s.cat)} ${s.cat}</span>
                                <span>${s.completed}/${s.total}</span>
                            </div>
                            <div class="progress-bar" style="height: 8px;">
                                <div class="progress-fill" style="width: ${s.percent}%; background: var(--color-primary);"></div>
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div style="background: white; padding: var(--spacing-lg); border-radius: var(--radius-lg);">
                    <h3 style="margin-bottom: var(--spacing-md); font-size: 18px; display: flex; align-items: center; gap: 8px;">
                        <i data-lucide="diamond" style="width: 20px; height: 20px;"></i>
                        Rarity
                    </h3>
                    ${rarityStats.map(s => `
                        <div style="display: flex; justify-content: space-between; padding: var(--spacing-sm) 0; border-bottom: 1px solid var(--color-border);">
                            <span style="text-transform: capitalize;">${s.rar}</span>
                            <span style="font-weight: 600;">${s.completed}/${s.total}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            lucide.createIcons();
        }

        // Render Map View (Pokus 2)
        function renderMapView() {
            const container = document.getElementById('mapPathContainer');

            // Generate SVG path
            const svgPath = generateWavyPath(gameState.quests.length);

            container.innerHTML = `
                <svg class="map-path-svg" viewBox="0 0 400 ${gameState.quests.length * 180}" preserveAspectRatio="xMidYMin slice">
                    <defs>
                        <linearGradient id="pathGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#cbd5e1;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#94a3b8;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="${svgPath}" stroke="url(#pathGradient)" stroke-width="6" fill="none" stroke-linecap="round" opacity="0.5"/>
                </svg>
                ${gameState.quests.map((quest, index) => `
                    <div class="path-item ${quest.completed ? 'completed' : ''}" onclick="toggleQuest(${quest.id})">
                        <div class="path-icon-wrapper">
                            <i data-lucide="${quest.completed ? 'check' : getCategoryLucideIcon(quest.category)}" class="path-icon"></i>
                        </div>
                        <div class="path-card">
                            <div class="path-card-header">
                                <div>
                                    <div class="path-card-meta">Z√°≈æitek ${index + 1} ‚Ä¢ ${getCategoryName(quest.category)}</div>
                                    <div class="path-card-title">${quest.title}</div>
                                </div>
                                <span class="path-card-xp">+${quest.xp} XP</span>
                            </div>
                            <div class="path-card-info">
                                <span class="rarity-badge rarity-${quest.rarity}">${quest.rarity}</span>
                                <span style="display: flex; align-items: center; gap: 4px;">
                                    <i data-lucide="users" style="width: 12px; height: 12px;"></i>
                                    ${quest.people.toLocaleString()}
                                </span>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;

            lucide.createIcons();
        }

        // Generate wavy path for SVG
        function generateWavyPath(numItems) {
            const startY = 32;
            const spacing = 180;
            const amplitude = 60;
            const centerX = 200;

            let path = `M ${centerX} ${startY}`;

            for (let i = 0; i < numItems - 1; i++) {
                const y1 = startY + (i * spacing);
                const y2 = startY + ((i + 1) * spacing);
                const midY = (y1 + y2) / 2;

                // Alternate left and right
                const direction = i % 2 === 0 ? 1 : -1;
                const controlX = centerX + (amplitude * direction);

                // Smooth S-curve
                path += ` C ${centerX} ${y1 + spacing * 0.3}, ${controlX} ${midY - spacing * 0.2}, ${controlX} ${midY}`;
                path += ` C ${controlX} ${midY + spacing * 0.2}, ${centerX} ${y2 - spacing * 0.3}, ${centerX} ${y2}`;
            }

            return path;
        }

        // Helper functions
        function getCategoryIcon(category) {
            const icons = {
                adrenalin: '<i data-lucide="zap" style="width: 16px; height: 16px; margin-right: 4px;"></i>',
                relax: '<i data-lucide="flower-2" style="width: 16px; height: 16px; margin-right: 4px;"></i>',
                food: '<i data-lucide="utensils" style="width: 16px; height: 16px; margin-right: 4px;"></i>',
                travel: '<i data-lucide="plane" style="width: 16px; height: 16px; margin-right: 4px;"></i>'
            };
            return icons[category] || '<i data-lucide="sparkles" style="width: 16px; height: 16px; margin-right: 4px;"></i>';
        }

        function getCategoryLucideIcon(category) {
            const icons = {
                adrenalin: 'zap',
                relax: 'flower-2',
                food: 'utensils',
                travel: 'plane'
            };
            return icons[category] || 'star';
        }

        function getCategoryName(category) {
            const names = {
                adrenalin: 'Adrenalin',
                relax: 'Relax',
                food: 'Food',
                travel: 'Travel'
            };
            return names[category] || category;
        }

        // Tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;

                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(tabName).classList.add('active');
            });
        });

        // Category filters
        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const category = btn.dataset.category;

                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                renderQuests(category);
            });
        });

        // Modals
        function showLevelUpModal() {
            document.getElementById('modalLevel').textContent = gameState.level;
            document.getElementById('levelUpModal').classList.add('show');
        }

        function closeLevelUpModal() {
            document.getElementById('levelUpModal').classList.remove('show');
        }

        function showAchievementModal(achievement) {
            document.getElementById('achievementModalIcon').innerHTML =
                `<i data-lucide="${achievement.icon}" style="width: 64px; height: 64px; stroke-width: 2; color: var(--color-warning);"></i>`;
            document.getElementById('achievementModalText').innerHTML =
                `Odemkl jsi achievement <strong>${achievement.title}</strong>!<br>${achievement.description}`;
            document.getElementById('achievementModal').classList.add('show');
            lucide.createIcons();
        }

        function closeAchievementModal() {
            document.getElementById('achievementModal').classList.remove('show');
        }

        function showAchievementInfo(id) {
            const ach = gameState.achievements.find(a => a.id === id);
            if (ach) {
                const iconNames = {
                    'target': 'üéØ', 'sprout': 'üå±', 'swords': '‚öîÔ∏è', 'crown': 'üëë',
                    'zap': '‚ö°', 'utensils': 'üçΩÔ∏è', 'plane': '‚úàÔ∏è', 'flower-2': 'üßò',
                    'flame': 'üî•', 'star': '‚≠ê', 'diamond': 'üíé'
                };
                const emoji = iconNames[ach.icon] || 'üèÜ';
                alert(`${emoji} ${ach.title}\n\n${ach.description}\n\nProgress: ${ach.progress}/${ach.target}\nStatus: ${ach.unlocked ? 'Odemƒçeno ‚úì' : 'Zamƒçeno üîí'}`);
            }
        }

        // Confetti animation
        function launchConfetti() {
            const canvas = document.getElementById('confetti');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const confetti = [];
            const confettiCount = 50;
            const colors = ['#006eb9', '#00b2e5', '#088107', '#ffa400', '#ff6b6b'];

            for (let i = 0; i < confettiCount; i++) {
                confetti.push({
                    x: Math.random() * canvas.width,
                    y: -10,
                    r: Math.random() * 5 + 2,
                    d: Math.random() * confettiCount,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    tilt: Math.random() * 10 - 10,
                    tiltAngleIncremental: Math.random() * 0.07 + 0.05,
                    tiltAngle: 0
                });
            }

            let animationId;
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                confetti.forEach((c, i) => {
                    c.tiltAngle += c.tiltAngleIncremental;
                    c.y += (Math.cos(c.d) + 3 + c.r / 2) / 2;
                    c.x += Math.sin(c.d);
                    c.tilt = Math.sin(c.tiltAngle - i / 3) * 15;

                    ctx.beginPath();
                    ctx.lineWidth = c.r / 2;
                    ctx.strokeStyle = c.color;
                    ctx.moveTo(c.x + c.tilt + c.r / 4, c.y);
                    ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r / 4);
                    ctx.stroke();

                    if (c.y > canvas.height) {
                        confetti.splice(i, 1);
                    }
                });

                if (confetti.length > 0) {
                    animationId = requestAnimationFrame(draw);
                } else {
                    cancelAnimationFrame(animationId);
                }
            }

            draw();
        }

        // Initialize
        loadState();
        lucide.createIcons();
    </script>
</body>
</html>
